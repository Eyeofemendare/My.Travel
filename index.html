<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TravelHub - Οργανώστε το Ταξίδι σας</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; overflow-x: hidden; }
        
        .sidebar-transition {
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .activity-highlight {
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, transparent 100%);
            border-left: 4px solid #3b82f6;
        }

        .completed-task {
            text-decoration: line-through;
            color: #94a3b8;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const Icon = ({ name, className = "w-5 h-5" }) => {
            const icons = {
                x: <path d="M18 6 6 18M6 6l12 12" />,
                layout: <><rect width="18" height="18" x="3" y="3" rx="2" /><path d="M3 9h18M9 21V9" /></>,
                calendar: <><path d="M8 2v4M16 2v4" /><rect width="18" height="18" x="3" y="4" rx="2" /><path d="M3 10h18" /></>,
                'credit-card': <><rect width="20" height="14" x="2" y="5" rx="2" /><line x1="2" x2="22" y1="10" y2="10" /></>,
                sparkles: <path d="m12 3 1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3Z" />,
                'edit-3': <path d="M12 20h9M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" />,
                'map-pin': <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" /><circle cx="12" cy="10" r="3" /></>,
                'refresh-cw': <><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" /><path d="M21 3v5h-5" /><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" /></>,
                plus: <path d="M12 5v14M5 12h14" />,
                check: <path d="m5 12 5 5L20 7" />,
                navigation: <polygon points="3 11 22 2 13 21 11 13 3 11" />,
                'edit-2': <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />,
                'trash-2': <><path d="M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2M10 11v6M14 11v6" /></>,
                menu: <><line x1="4" x2="20" y1="12" y2="12" /><line x1="4" x2="20" y1="6" y2="6" /><line x1="4" x2="20" y1="18" y2="18" /></>,
                'chevron-left': <path d="m15 18-6-6 6-6" />,
                'chevron-right': <path d="m9 18 6-6-6-6" />,
                wallet: <><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4" /><path d="M3 5v14a2 2 0 0 0 2 2h16v-5" /><path d="M18 12a2 2 0 0 0 0 4h4v-4Z" /></>,
                save: <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2zM17 21v-8H7v8M7 3v5h8" />,
                'alert-circle': <><circle cx="12" cy="12" r="10" /><line x1="12" x2="12" y1="8" y2="12" /><line x1="12" x2="12.01" y1="16" y2="16" /></>
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || null}
                </svg>
            );
        };

        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm">
                    <div className="bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl">
                        <div className="px-6 py-4 border-b border-slate-100 flex justify-between items-center">
                            <h3 className="font-bold text-lg">{title}</h3>
                            <button onClick={onClose} className="text-slate-400 hover:text-slate-600 transition-colors">
                                <Icon name="x" className="w-5 h-5" />
                            </button>
                        </div>
                        <div className="p-6">{children}</div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [sidebarOpen, setSidebarOpen] = useState(true);
            const [mobileSidebarOpen, setMobileSidebarOpen] = useState(false);
            
            const [apiKey, setApiKey] = useState(() => localStorage.getItem('gemini_api_key') || ""); 
            const [isAiLoading, setIsAiLoading] = useState(false);
            const [aiSuggestion, setAiSuggestion] = useState(null);
            const [errorMessage, setErrorMessage] = useState("");
            
            const [isEditingTrip, setIsEditingTrip] = useState(false);
            const [editingActivity, setEditingActivity] = useState(null);
            const [editingBudget, setEditingBudget] = useState(null);
            const [isAddingActivity, setIsAddingActivity] = useState(false);
            const [isAddingBudget, setIsAddingBudget] = useState(false);
            const [activityToDelete, setActivityToDelete] = useState(null);

            const [tripDetails, setTripDetails] = useState({
                title: "Ταξίδι στο Παρίσι",
                startDate: "2024-10-15",
                endDate: "2024-10-20",
                guests: "2",
                destination: "Παρίσι, Γαλλία"
            });

            const [activities, setActivities] = useState([
                { id: 101, date: '2024-10-15', time: '10:00', task: 'Άφιξη στο Ξενοδοχείο Ritz', type: 'hotel', completed: false },
                { id: 102, date: '2024-10-16', time: '11:00', task: 'Επίσκεψη στο Λούβρο', type: 'attraction', completed: false }
            ]);

            const [budget, setBudget] = useState([
                { id: 1, category: 'Πτήσεις', amount: 450 },
                { id: 2, category: 'Διαμονή', amount: 320 }
            ]);

            useEffect(() => {
                localStorage.setItem('gemini_api_key', apiKey);
            }, [apiKey]);

            const totalBudget = useMemo(() => budget.reduce((acc, curr) => acc + curr.amount, 0), [budget]);

            const groupedItinerary = useMemo(() => {
                const groups = {};
                const sorted = [...activities].sort((a, b) => new Date(`${a.date}T${a.time}`) - new Date(`${b.date}T${b.time}`));
                sorted.forEach(act => {
                    if (!groups[act.date]) groups[act.date] = [];
                    groups[act.date].push(act);
                });
                return Object.entries(groups).sort((a, b) => new Date(a[0]) - new Date(b[0]));
            }, [activities]);

            const suggestActivities = async () => {
                setErrorMessage("");
                setAiSuggestion(null);
                if (!apiKey) {
                    setErrorMessage("Παρακαλώ εισάγετε ένα έγκυρο Gemini API Key στη Sidebar.");
                    return;
                }

                setIsAiLoading(true);
                try {
                    const prompt = `Πρότεινε 3 δραστηριότητες για ${tripDetails.destination}. Επίστρεψε ΜΟΝΟ JSON στη μορφή: { "suggestions": [{ "time": "HH:MM", "date": "YYYY-MM-DD", "task": "περιγραφή" }] }`;
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }],
                            generationConfig: { responseMimeType: "application/json" }
                        })
                    });
                    
                    if (!response.ok) throw new Error("Σφάλμα API. Ελέγξτε το Key.");
                    const data = await response.json();
                    const result = JSON.parse(data.candidates?.[0]?.content?.parts?.[0]?.text);
                    setAiSuggestion(result.suggestions);
                } catch (err) {
                    setErrorMessage(err.message);
                } finally { 
                    setIsAiLoading(false); 
                }
            };

            const toggleSidebar = () => setSidebarOpen(!sidebarOpen);

            return (
                <div className="min-h-screen flex bg-slate-50 relative">
                    
                    {/* Mobile Header */}
                    <header className="md:hidden fixed top-0 left-0 right-0 h-16 bg-white border-b border-slate-200 z-40 px-4 flex items-center justify-between">
                        <div className="flex items-center gap-2">
                            <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-sm">T</div>
                            <span className="font-bold text-slate-800 tracking-tight">TravelHub</span>
                        </div>
                        <button onClick={() => setMobileSidebarOpen(true)} className="p-2 text-slate-600">
                            <Icon name="menu" />
                        </button>
                    </header>

                    {/* Sidebar Toggle Handle (Desktop only) */}
                    <button 
                        onClick={toggleSidebar} 
                        className={`hidden md:flex fixed z-[60] top-8 items-center justify-center w-8 h-8 bg-white border border-slate-200 rounded-full shadow-md text-slate-400 hover:text-blue-600 transition-all duration-300 transform -translate-y-1/2
                        ${sidebarOpen ? 'left-[240px]' : 'left-[64px]'}`}
                    >
                        <Icon name={sidebarOpen ? 'chevron-left' : 'chevron-right'} className="w-4 h-4" />
                    </button>

                    {/* Sidebar */}
                    <aside className={`sidebar-transition fixed md:relative z-50 bg-white border-r border-slate-200 h-screen p-6 flex flex-col shadow-xl md:shadow-none 
                        ${sidebarOpen ? 'w-64' : 'w-20'} 
                        ${mobileSidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'}`}>
                        
                        <div className="flex items-center justify-between mb-10 overflow-hidden">
                            <div className={`flex items-center gap-2 transition-opacity duration-200 ${sidebarOpen ? 'opacity-100' : 'opacity-0'}`}>
                                <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-lg">T</div>
                                <span className="text-xl font-bold text-slate-800 tracking-tight whitespace-nowrap">TravelHub</span>
                            </div>
                            <button onClick={() => setMobileSidebarOpen(false)} className="md:hidden p-1.5 text-slate-400">
                                <Icon name="x" className="w-5 h-5" />
                            </button>
                        </div>

                        <nav className="space-y-2 flex-1">
                            {[
                                { id: 'dashboard', label: 'Dashboard', icon: 'layout' },
                                { id: 'itinerary', label: 'Πρόγραμμα', icon: 'calendar' },
                                { id: 'budget', label: 'Budget', icon: 'credit-card' }
                            ].map(tab => (
                                <button key={tab.id} onClick={() => { setActiveTab(tab.id); setMobileSidebarOpen(false); }} 
                                    className={`w-full text-left px-4 py-3 rounded-xl transition-all flex items-center gap-3 relative group
                                    ${activeTab === tab.id ? 'bg-blue-50 text-blue-600 font-bold' : 'text-slate-500 hover:bg-slate-50'}`}>
                                    <Icon name={tab.icon} className="w-5 h-5 flex-shrink-0" />
                                    {sidebarOpen && <span className="whitespace-nowrap">{tab.label}</span>}
                                    {!sidebarOpen && (
                                        <div className="absolute left-full ml-4 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 whitespace-nowrap">
                                            {tab.label}
                                        </div>
                                    )}
                                </button>
                            ))}
                        </nav>
                        
                        <div className={`mt-auto transition-all duration-300 ${sidebarOpen ? 'p-4 bg-slate-50 rounded-2xl border border-slate-200' : 'p-0 bg-transparent border-none'}`}>
                            {sidebarOpen ? (
                                <>
                                    <label className="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1 mb-2">
                                        <Icon name="sparkles" className="w-3 h-3 text-purple-500" /> Gemini Key
                                    </label>
                                    <input 
                                        type="password" 
                                        value={apiKey} 
                                        onChange={(e) => setApiKey(e.target.value)} 
                                        placeholder="sk-..." 
                                        className="w-full p-2 text-xs border border-slate-300 rounded-lg bg-white outline-none focus:ring-2 ring-purple-400" 
                                    />
                                </>
                            ) : (
                                <div className="flex justify-center text-purple-500 py-4">
                                    <Icon name="sparkles" className="w-5 h-5" />
                                </div>
                            )}
                        </div>
                    </aside>

                    {/* Main Content */}
                    <main className="flex-1 p-6 md:p-10 pt-20 md:pt-10 overflow-y-auto">
                        <div className="max-w-4xl mx-auto">
                            {activeTab === 'dashboard' && (
                                <div className="space-y-6">
                                    <div className="flex flex-col sm:flex-row justify-between items-start gap-4">
                                        <div className="group relative">
                                            <div className="flex items-center gap-2">
                                                <h1 className="text-3xl font-black text-slate-900 leading-tight">
                                                    {tripDetails.title} ({tripDetails.guests} άτομα)
                                                </h1>
                                                <button onClick={() => setIsEditingTrip(true)} className="p-1 text-slate-200 hover:text-blue-500 transition-colors">
                                                    <Icon name="edit-3" className="w-5 h-5" />
                                                </button>
                                            </div>
                                            <div className="mt-3 inline-flex items-center gap-3 bg-white border border-slate-200 px-4 py-2 rounded-full shadow-sm text-sm font-medium text-slate-600">
                                                <span className="flex items-center gap-1.5"><Icon name="map-pin" className="w-3.5 h-3.5 text-blue-500" /> {tripDetails.destination}</span>
                                                <span className="text-slate-300">|</span>
                                                <span className="flex items-center gap-1.5"><Icon name="calendar" className="w-3.5 h-3.5 text-blue-500" /> {tripDetails.startDate} έως {tripDetails.endDate}</span>
                                            </div>
                                        </div>
                                        <button 
                                            onClick={suggestActivities} 
                                            disabled={isAiLoading}
                                            className="bg-slate-900 text-white px-6 py-3 rounded-2xl flex items-center gap-2 shadow-xl shadow-slate-200 hover:bg-black transition-all active:scale-95 disabled:opacity-50"
                                        >
                                            {isAiLoading ? <Icon name="refresh-cw" className="w-4 h-4 animate-spin" /> : <Icon name="sparkles" className="w-4 h-4 text-purple-400" />}
                                            <span className="font-bold">AI Βοηθός</span>
                                        </button>
                                    </div>

                                    {errorMessage && (
                                        <div className="bg-red-50 border border-red-100 p-4 rounded-2xl flex items-center gap-3 text-red-600 text-sm">
                                            <Icon name="alert-circle" className="w-5 h-5" />
                                            <p className="font-semibold">{errorMessage}</p>
                                        </div>
                                    )}

                                    {aiSuggestion && (
                                        <div className="bg-gradient-to-br from-purple-50 to-blue-50 p-6 rounded-3xl border border-blue-100 grid grid-cols-1 md:grid-cols-3 gap-4 animate-in fade-in slide-in-from-top-2">
                                            {aiSuggestion.map((sug, i) => (
                                                <div key={i} className="bg-white p-4 rounded-2xl shadow-sm border border-white flex flex-col justify-between hover:shadow-md transition-all group">
                                                    <div>
                                                        <p className="text-[10px] font-black text-purple-600 uppercase mb-1">{sug.time}</p>
                                                        <p className="font-bold text-slate-800 text-sm">{sug.task}</p>
                                                    </div>
                                                    <button 
                                                        onClick={() => {
                                                            setActivities(p => [...p, {id: Date.now()+i, ...sug, completed: false}]);
                                                            setAiSuggestion(prev => prev.filter((_, idx) => idx !== i));
                                                        }} 
                                                        className="mt-4 w-full py-2 bg-slate-50 text-slate-900 rounded-xl text-xs font-bold hover:bg-blue-600 hover:text-white transition-colors"
                                                    >
                                                        Προσθήκη
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    )}

                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                        <Card className="p-6 bg-slate-100 border-none">
                                            <p className="text-slate-500 text-xs font-bold uppercase mb-1">Προϋπολογισμός</p>
                                            <p className="text-3xl font-black text-slate-900">€{totalBudget}</p>
                                        </Card>
                                        <Card className="p-6 bg-slate-100 border-none">
                                            <p className="text-slate-500 text-xs font-bold uppercase mb-1">Δραστηριότητες</p>
                                            <p className="text-3xl font-black text-blue-600">{activities.length}</p>
                                        </Card>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'itinerary' && (
                                <div className="space-y-8">
                                    <div className="flex justify-between items-center">
                                        <h2 className="text-2xl font-bold text-slate-900">Πρόγραμμα</h2>
                                        <button onClick={() => setIsAddingActivity(true)} className="bg-blue-600 text-white px-5 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-blue-700 shadow-lg shadow-blue-100">
                                            <Icon name="plus" /> Προσθήκη
                                        </button>
                                    </div>
                                    
                                    {groupedItinerary.length === 0 ? (
                                        <div className="text-center py-24 bg-white rounded-3xl border border-dashed border-slate-200">
                                            <p className="text-slate-400">Κενό πρόγραμμα. Ξεκινήστε προσθέτοντας δραστηριότητες!</p>
                                        </div>
                                    ) : (
                                        groupedItinerary.map(([date, acts]) => (
                                            <div key={date} className="space-y-4">
                                                <h3 className="font-black text-slate-400 text-xs uppercase tracking-widest px-2">
                                                    {new Date(date).toLocaleDateString('el-GR', { weekday: 'long', day: 'numeric', month: 'long' })}
                                                </h3>
                                                <div className="space-y-3">
                                                    {acts.map(act => (
                                                        <div key={act.id} className={`group p-4 bg-white rounded-2xl border flex items-center gap-4 transition-all ${act.completed ? 'activity-highlight border-blue-200 opacity-70' : 'border-slate-100 shadow-sm'}`}>
                                                            <button 
                                                                onClick={() => setActivities(p => p.map(a => a.id === act.id ? {...a, completed: !a.completed} : a))}
                                                                className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${act.completed ? 'bg-blue-600 border-blue-600 text-white' : 'border-slate-200'}`}
                                                            >
                                                                {act.completed && <Icon name="check" className="w-3.5 h-3.5" />}
                                                            </button>
                                                            <span className="font-black text-sm text-blue-600 min-w-[50px]">{act.time}</span>
                                                            <p className={`flex-1 font-bold ${act.completed ? 'completed-task' : 'text-slate-800'}`}>{act.task}</p>
                                                            <div className="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                                                <button onClick={() => setEditingActivity(act)} className="p-2 text-slate-300 hover:text-blue-600">
                                                                    <Icon name="edit-2" className="w-4 h-4" />
                                                                </button>
                                                                <button onClick={() => setActivityToDelete(act)} className="p-2 text-slate-300 hover:text-red-500">
                                                                    <Icon name="trash-2" className="w-4 h-4" />
                                                                </button>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            )}

                            {activeTab === 'budget' && (
                                <div className="space-y-6">
                                    <div className="flex justify-between items-center mb-8">
                                        <h2 className="text-2xl font-bold text-slate-900">Έξοδα</h2>
                                        <button onClick={() => setIsAddingBudget(true)} className="bg-slate-900 text-white px-5 py-2.5 rounded-xl text-sm font-bold shadow-lg">
                                            Νέο Έξοδο
                                        </button>
                                    </div>
                                    <div className="space-y-3">
                                        {budget.map(item => (
                                            <div key={item.id} className="group p-4 bg-white rounded-2xl border border-slate-100 flex justify-between items-center hover:shadow-md transition-shadow">
                                                <span className="font-bold text-slate-700">{item.category}</span>
                                                <div className="flex items-center gap-4">
                                                    <span className="font-black text-xl text-slate-900">€{item.amount}</span>
                                                    <div className="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                                        <button onClick={() => setEditingBudget(item)} className="p-2 text-slate-300 hover:text-blue-600">
                                                            <Icon name="edit-2" className="w-4 h-4" />
                                                        </button>
                                                        <button onClick={() => setBudget(p => p.filter(i => i.id !== item.id))} className="p-2 text-slate-300 hover:text-red-500">
                                                            <Icon name="trash-2" className="w-4 h-4" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="p-8 bg-blue-600 text-white rounded-[2rem] flex justify-between items-center mt-10 shadow-2xl shadow-blue-200">
                                        <div>
                                            <p className="text-blue-200 text-xs font-bold uppercase mb-1">Σύνολο</p>
                                            <span className="text-4xl font-black">€{totalBudget}</span>
                                        </div>
                                        <Icon name="wallet" className="w-10 h-10 opacity-30" />
                                    </div>
                                </div>
                            )}
                        </div>
                    </main>

                    {/* Modals */}
                    
                    {/* TRIP EDIT MODAL */}
                    <Modal isOpen={isEditingTrip} onClose={() => setIsEditingTrip(false)} title="Στοιχεία Ταξιδιού">
                        <form onSubmit={(e) => {
                            e.preventDefault();
                            const formData = new FormData(e.target);
                            setTripDetails({
                                title: formData.get('title'),
                                destination: formData.get('destination'),
                                startDate: formData.get('startDate'),
                                endDate: formData.get('endDate'),
                                guests: formData.get('guests')
                            });
                            setIsEditingTrip(false);
                        }} className="space-y-4">
                            <div>
                                <label className="text-xs font-bold text-slate-400 uppercase mb-1 block">Όνομα Ταξιδιού</label>
                                <input name="title" type="text" defaultValue={tripDetails.title} className="w-full p-3 border rounded-xl" required />
                            </div>
                            <div>
                                <label className="text-xs font-bold text-slate-400 uppercase mb-1 block">Προορισμός</label>
                                <input name="destination" type="text" defaultValue={tripDetails.destination} className="w-full p-3 border rounded-xl" required />
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-xs font-bold text-slate-400 uppercase mb-1 block">Από</label>
                                    <input name="startDate" type="date" defaultValue={tripDetails.startDate} className="w-full p-3 border rounded-xl" required />
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-slate-400 uppercase mb-1 block">Έως</label>
                                    <input name="endDate" type="date" defaultValue={tripDetails.endDate} className="w-full p-3 border rounded-xl" required />
                                </div>
                            </div>
                            <div>
                                <label className="text-xs font-bold text-slate-400 uppercase mb-1 block">Άτομα</label>
                                <input name="guests" type="number" defaultValue={tripDetails.guests} className="w-full p-3 border rounded-xl" required />
                            </div>
                            <button type="submit" className="w-full bg-slate-900 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2">
                                <Icon name="save" className="w-4 h-4" /> Αποθήκευση
                            </button>
                        </form>
                    </Modal>

                    {/* ACTIVITY EDIT MODAL */}
                    <Modal isOpen={!!editingActivity} onClose={() => setEditingActivity(null)} title="Επεξεργασία Δραστηριότητας">
                        <form onSubmit={(e) => {
                            e.preventDefault();
                            const formData = new FormData(e.target);
                            setActivities(p => p.map(a => a.id === editingActivity.id ? {
                                ...a,
                                date: formData.get('date'),
                                time: formData.get('time'),
                                task: formData.get('task')
                            } : a));
                            setEditingActivity(null);
                        }} className="space-y-4">
                            <input name="date" type="date" defaultValue={editingActivity?.date} className="w-full p-3 border rounded-xl" required />
                            <input name="time" type="time" defaultValue={editingActivity?.time} className="w-full p-3 border rounded-xl" required />
                            <input name="task" type="text" defaultValue={editingActivity?.task} className="w-full p-3 border rounded-xl" required />
                            <button type="submit" className="w-full bg-blue-600 text-white py-3.5 rounded-xl font-bold">Ενημέρωση</button>
                        </form>
                    </Modal>

                    {/* BUDGET EDIT MODAL */}
                    <Modal isOpen={!!editingBudget} onClose={() => setEditingBudget(null)} title="Επεξεργασία Εξόδου">
                        <form onSubmit={(e) => {
                            e.preventDefault();
                            const formData = new FormData(e.target);
                            setBudget(p => p.map(b => b.id === editingBudget.id ? {
                                ...b,
                                category: formData.get('category'),
                                amount: Number(formData.get('amount'))
                            } : b));
                            setEditingBudget(null);
                        }} className="space-y-4">
                            <input name="category" type="text" defaultValue={editingBudget?.category} className="w-full p-3 border rounded-xl" required />
                            <input name="amount" type="number" defaultValue={editingBudget?.amount} className="w-full p-3 border rounded-xl" required />
                            <button type="submit" className="w-full bg-slate-900 text-white py-3.5 rounded-xl font-bold">Αποθήκευση</button>
                        </form>
                    </Modal>

                    {/* ADD MODALS */}
                    <Modal isOpen={isAddingActivity} onClose={() => setIsAddingActivity(false)} title="Νέα Δραστηριότητα">
                        <form onSubmit={(e) => {
                            e.preventDefault();
                            const formData = new FormData(e.target);
                            setActivities(p => [...p, {
                                id: Date.now(),
                                date: formData.get('date'),
                                time: formData.get('time'),
                                task: formData.get('task'),
                                completed: false
                            }]);
                            setIsAddingActivity(false);
                        }} className="space-y-4">
                            <input name="date" type="date" className="w-full p-3 border rounded-xl" required />
                            <input name="time" type="time" className="w-full p-3 border rounded-xl" required />
                            <input name="task" type="text" className="w-full p-3 border rounded-xl" placeholder="Τι θα κάνετε;" required />
                            <button type="submit" className="w-full bg-blue-600 text-white py-3.5 rounded-xl font-bold">Προσθήκη</button>
                        </form>
                    </Modal>

                    <Modal isOpen={isAddingBudget} onClose={() => setIsAddingBudget(false)} title="Νέο Έξοδο">
                        <form onSubmit={(e) => {
                            e.preventDefault();
                            const formData = new FormData(e.target);
                            setBudget(p => [...p, { id: Date.now(), category: formData.get('category'), amount: Number(formData.get('amount')) }]);
                            setIsAddingBudget(false);
                        }} className="space-y-4">
                            <input name="category" type="text" className="w-full p-3 border rounded-xl" placeholder="Περιγραφή (π.χ. Πτήση)" required />
                            <input name="amount" type="number" className="w-full p-3 border rounded-xl" placeholder="Ποσό (€)" required />
                            <button type="submit" className="w-full bg-blue-600 text-white py-3.5 rounded-xl font-bold">Καταχώρηση</button>
                        </form>
                    </Modal>

                    <Modal isOpen={!!activityToDelete} onClose={() => setActivityToDelete(null)} title="Διαγραφή">
                        <div className="space-y-6 text-center">
                            <p className="text-slate-600 font-medium">Σίγουρη διαγραφή του <br/><span className="text-slate-900 font-bold">"{activityToDelete?.task}"</span>;</p>
                            <div className="flex gap-3">
                                <button onClick={() => setActivityToDelete(null)} className="flex-1 px-4 py-3 rounded-xl border border-slate-200 font-bold text-slate-500">Όχι</button>
                                <button onClick={() => {
                                    setActivities(p => p.filter(a => a.id !== activityToDelete.id));
                                    setActivityToDelete(null);
                                }} className="flex-1 px-4 py-3 rounded-xl bg-red-600 text-white font-bold">Διαγραφή</button>
                            </div>
                        </div>
                    </Modal>

                </div>
            );
        };

        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-3xl border border-slate-100 shadow-sm ${className}`}>
                {children}
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
